{"version":3,"file":"Attribute.js","sources":["../../../source/js/classes/Attribute.js"],"sourcesContent":["export default class Attribute {\n\n  #id;\n  #obj;\n  #values;\n\n  constructor(id, obj) {\n    this.#id = id;\n    this.#obj = obj;\n    this.#values = [];\n  }\n\n\n  // public Methods\n\n  fetchValuesWithParentCategoryId(parentCategoryId) {\n    return new Promise((resolve, reject) => {\n      const values = this.#values.filter(value => value.parentCategoryId === parentCategoryId);\n      if (values.length > 0) {\n        resolve(values);\n      } else {\n        const body = {};\n        if (parentCategoryId) body.node = parentCategoryId;\n        if (this.order) body.order = this.order;\n        fetch(\n          this.api,\n          {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(body)\n          }\n        )\n        .then(responce => responce.json())\n        .then(values => {\n\n          const __zzz__values = values.map(value => {\n            return {\n              node: value.node,\n              count: value.count,\n              hasChild: !value.tip,\n              label: value.label\n            };\n          });\n          \n          // set parent category id\n          // if (parentCategoryId) values.forEach(value => value.parentCategoryId = parentCategoryId);\n          if (parentCategoryId) __zzz__values.forEach(value => value.parentCategoryId = parentCategoryId);\n          // set values\n          // this.#values.push(...values);\n          this.#values.push(...__zzz__values);\n          // resolve(values);\n          resolve(__zzz__values);\n        })\n        .catch(error => {\n          console.error(this, error);\n          reject(error);\n        });\n      }\n    });\n  }\n\n  getValue(node) {\n    return this.#values.find(value => value.node === node);\n  }\n\n  // accessors\n\n  get id() {\n    return this.#id;\n  }\n\n  get label() {\n    return this.#obj.label;\n  }\n\n  get description() {\n    return this.#obj.description;\n  }\n\n  get api() {\n    return this.#obj.api;\n  }\n\n  get dataset() {\n    return this.#obj.dataset;\n  }\n\n  get datamodel() {\n    return this.#obj.datamodel;\n  }\n\n  get source() {\n    return this.#obj.source;\n  }\n\n  get order() {\n    return this.#obj.order;\n  }\n\n  get values() {\n    return this.#values;\n  }\n\n}"],"names":["Attribute","id","obj","parentCategoryId","Promise","resolve","reject","values","filter","value","length","body","node","order","fetch","api","method","headers","JSON","stringify","then","responce","json","__zzz__values","map","count","hasChild","tip","label","forEach","push","catch","error","console","find","description","dataset","datamodel","source"],"mappings":"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"}